{% comment %}
  Article Page Template for TrendifyShop
{% endcomment %}

<article class="article-page section-padding">
  <div class="page-width">
    <header class="article-header">
      <div class="article-breadcrumb">
        <a href="{{ blog.url }}">{{ blog.title }}</a> / {{ article.title }}
      </div>
      
      <h1 class="article__title">{{ article.title }}</h1>
      
      <div class="article__meta">
        <time class="article__date" datetime="{{ article.published_at | date: '%Y-%m-%d' }}">
          {{ article.published_at | date: format: 'month_day_year' }}
        </time>
        {% if article.author != blank %}
          <span class="article__author">{{ 'blogs.article.by_author' | t: author: article.author }}</span>
        {% endif %}
        {% if blog.comments_enabled? %}
          <a href="#comments" class="article__comments-link">
            {{ 'blogs.comments.comments_with_count' | t: count: article.comments_count }}
          </a>
        {% endif %}
      </div>
    </header>

    {% if article.image %}
      <div class="article__featured-image">
        <img src="{{ article.image | image_url: width: 1200 }}" 
             alt="{{ article.image.alt | default: article.title | escape }}"
             loading="eager"
             width="1200"
             height="{{ 1200 | divided_by: article.image.aspect_ratio }}">
      </div>
    {% endif %}

    <div class="article__content">
      {{ article.content }}
    </div>

    {% if article.tags.size > 0 %}
      <div class="article__tags">
        <h3>{{ 'blogs.article.tags' | t }}</h3>
        <div class="tag-list">
          {% for tag in article.tags %}
            <a href="{{ blog.url }}/tagged/{{ tag | handle }}" class="tag">
              {{ tag }}
            </a>
          {% endfor %}
        </div>
      </div>
    {% endif %}

    {% if blog.comments_enabled? %}
      <div id="comments" class="article__comments">
        <h3>{{ 'blogs.comments.title' | t }}</h3>
        
        {% paginate article.comments by 5 %}
          {% for comment in article.comments %}
            <div class="comment">
              <div class="comment__header">
                <h4 class="comment__author">{{ comment.author }}</h4>
                <time class="comment__date" datetime="{{ comment.created_at | date: '%Y-%m-%d' }}">
                  {{ comment.created_at | date: format: 'month_day_year' }}
                </time>
              </div>
              <div class="comment__content">
                {{ comment.content }}
              </div>
            </div>
          {% endfor %}
          
          {% if paginate.parts.size > 1 %}
            <div class="pagination-wrapper">
              {{ paginate | default_pagination }}
            </div>
          {% endif %}
        {% endpaginate %}

        {% form 'new_comment', article %}
          <h4>{{ 'blogs.comments.leave_comment' | t }}</h4>
          
          <div class="comment-form__fields">
            <div class="field">
              <label for="CommentAuthor">{{ 'blogs.comments.name' | t }} *</label>
              <input type="text" name="comment[author]" id="CommentAuthor" required>
            </div>
            
            <div class="field">
              <label for="CommentEmail">{{ 'blogs.comments.email' | t }} *</label>
              <input type="email" name="comment[email]" id="CommentEmail" required>
            </div>
            
            <div class="field">
              <label for="CommentBody">{{ 'blogs.comments.message' | t }} *</label>
              <textarea name="comment[body]" id="CommentBody" rows="6" required></textarea>
            </div>
            
            <button type="submit" class="btn btn--primary">
              {{ 'blogs.comments.post' | t }}
            </button>
          </div>
        {% endform %}
      </div>
    {% endif %}

    <div class="article__navigation">
      {% if blog.previous_article %}
        <a href="{{ blog.previous_article.url }}" class="article-nav article-nav--prev">
          ← {{ blog.previous_article.title }}
        </a>
      {% endif %}
      
      <a href="{{ blog.url }}" class="article-nav article-nav--back">
        {{ 'blogs.article.back_to_blog' | t: title: blog.title }}
      </a>
      
      {% if blog.next_article %}
        <a href="{{ blog.next_article.url }}" class="article-nav article-nav--next">
          {{ blog.next_article.title }} →
        </a>
      {% endif %}
    </div>
  </div>
</article>

<style>
.article-header {
  text-align: center;
  margin-bottom: 3rem;
}

.article-breadcrumb {
  font-size: 0.875rem;
  color: var(--color-base-text-light);
  margin-bottom: 1rem;
}

.article-breadcrumb a {
  color: var(--color-primary);
  text-decoration: none;
}

.article__title {
  font-size: clamp(2rem, 4vw, 3rem);
  margin-bottom: 1rem;
}

.article__meta {
  display: flex;
  justify-content: center;
  gap: 1.5rem;
  font-size: 0.875rem;
  color: var(--color-base-text-light);
}

.article__featured-image {
  margin-bottom: 3rem;
  text-align: center;
}

.article__featured-image img {
  max-width: 100%;
  height: auto;
  border-radius: var(--border-radius);
}

.article__content {
  max-width: 800px;
  margin: 0 auto 3rem;
  line-height: 1.7;
  font-size: 1.125rem;
}

.article__content h2,
.article__content h3,
.article__content h4 {
  margin: 2rem 0 1rem 0;
}

.article__content p {
  margin-bottom: 1.5rem;
}

.article__tags {
  max-width: 800px;
  margin: 0 auto 3rem;
  padding: 2rem 0;
  border-top: var(--border-width) solid rgba(var(--color-base-outline-button), var(--border-opacity));
}

.tag-list {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin-top: 1rem;
}

.tag {
  display: inline-block;
  padding: 6px 12px;
  background: var(--color-base-background-alt);
  color: var(--color-base-text);
  text-decoration: none;
  border-radius: var(--border-radius);
  font-size: 0.875rem;
  transition: var(--animation-default);
}

.tag:hover {
  background: var(--color-primary);
  color: white;
}

.article__comments {
  max-width: 800px;
  margin: 0 auto;
  padding-top: 3rem;
  border-top: var(--border-width) solid rgba(var(--color-base-outline-button), var(--border-opacity));
}

.comment {
  margin-bottom: 2rem;
  padding: 1.5rem;
  background: var(--color-base-background-alt);
  border-radius: var(--border-radius);
}

.comment__header {
  display: flex;
  justify-content: space-between;
  margin-bottom: 1rem;
}

.comment__author {
  font-weight: var(--font-body-weight-bold);
  color: var(--color-base-accent);
  margin: 0;
}

.comment__date {
  font-size: 0.875rem;
  color: var(--color-base-text-light);
}

.comment-form__fields {
  display: grid;
  gap: 1rem;
  margin-top: 1.5rem;
}

.field label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: var(--font-body-weight-bold);
}

.field input,
.field textarea {
  width: 100%;
  padding: 12px;
  border: var(--border-width) solid var(--color-base-outline-button);
  border-radius: var(--border-radius);
  font-family: inherit;
}

.article__navigation {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 4rem;
  padding-top: 2rem;
  border-top: var(--border-width) solid rgba(var(--color-base-outline-button), var(--border-opacity));
}

.article-nav {
  color: var(--color-primary);
  text-decoration: none;
  font-weight: 500;
  transition: var(--animation-default);
}

.article-nav:hover {
  color: var(--color-primary-dark);
}

@media screen and (max-width: 767px) {
  .article__meta {
    flex-direction: column;
    gap: 0.5rem;
  }
  
  .article__navigation {
    flex-direction: column;
    gap: 1rem;
  }
}
</style>